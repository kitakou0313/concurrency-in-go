# 1章 並行処理入門

## 並行処理で起きる問題
### 競合状態
2つ以上の操作が正しい順番で行われなければならないところで順序が保障されていなかったときに発生する問題．

#### データ競合
- Read, Writeの実行順序が保障されていなかった時に起きる問題
- 同一のコードを実行しても，結果が定まらない

```
package main

import "fmt"

func main() {
	var data int

	go func() {
		data++ // Write
	}()

	if data == 0 { // Read 1
		fmt.Println("The val is %v") // Read 2
	}
}

```

- 上記のサンプルであれば3通りの結果が考えられる
    - WriteがRead1, Read2の処理のどこで実行されるかによる
    - 例
        - なにも表示されない
        - 1と表示
        - 0と表示
	- 各処理が実行されるまでに長時間（1hなど）空いたらどうなるか考えてみる
- 論理的正当性を目指すべき

## アトミック性（原子性）
- 何かがアトミックである <-> それが操作されている特定のコンテキストの中では分割，中断不可であること
- あるものがアトミックであるかはコンテキストで異なる
	- アプリケーションのコンテキストではアトミックでも，OSのコンテキストではアトミックではないかもしれない
- 分割不可，中断不可 <-> アトミックな処理が起きた場合，そのコンテキスト全体で処理をしていてその他の何かが同時には起きていないこと


## メモリアクセス競合
- クリティカルセクション <->　排他的な処理が必要な場所
	- 共有リソースにアクセスする場所
		- 変数へのRead, Writeが起きる場所
- クリティカルセクションに排他的な処理を追加することでアトミックな処理にできる？

- 排他的な処理の導入で何か解決している？
